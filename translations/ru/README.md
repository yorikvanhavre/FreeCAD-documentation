# Документация FreeCAD

Это эксперимент по реконструкции документации FreeCAD более устойчивым и основанным на языке разметки Markdown способом. В настоящее время она создана исключительно для того, чтобы служить в качестве доказательства концепции, исследовать, что можно сделать с файлами Markdown и системы на базе git, тестировать различные функции и системы, чтобы достичь того же уровня эффективности и открытости, что мы имеем на вики FreeCAD, в конце концов, если все пойдет хорошо, убедить сообщество перейти на этот формат.

## Цели

* Иметь более структурированную, профессиональную и удобную для навигации и использования документацию, чем мы имеем в настоящее время на вики
* Быть более легко управляемым, устойчивым и портативным, чем текущий вики
* Упростить упаковку в автономный пакет документации, который будет поставляться с FreeCAD
* Предложить такой же уровень простоты людям, желающим сотрудничать
* Предложить хорошую систему перевода, которая проста в использовании для людей, желающих переводить
* Предлагать «версии» документации, соответствующие выпускам FreeCAD
* Предлагать документацию в форматах, подходящих для электронных книг - ePub, pdf и т. д.
* Здесь также можно интегрировать файлы примеров

## Преимущества

* Язык разметки Markdown[ прост и очень похож ](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet) на синтаксис вики, плюс, он более широко распространен и легче конвертируется в другие форматы (доступно больше конвертеров) и интегрируется в другие платформы, которые могут выполнять некоторые другие задачи автоматически. Существует много сценариев, таких как pandoc, которые могут преобразовать в/из Wiki синтаксиса автоматически, но преобразование вручную также довольно легко сделать
* Многие интересные вещи, которые мы должны делать с плагинами в вики являются встроенными в разметку, например изображения SVG или подсветка синтаксиса кода
* Интерфейс github такой же удобный или даже более удобный, чем Mediawiki. Вы можете полностью работать внутри интерфейса github (включая загрузку изображений и т. п.) и не нужно заботиться о материалах git
* Вы можете работать в автономном режиме, скопировать и объединить репозитории а затем выгрузить их на сервер, как обычный git, также у вас есть дополнительные великолепные WYSIWYG редакторы, например [ typora ](https://typora.io) (больше нет окон редактирования/просмотра)
* Рабочий процесс git обеспечивает более тонкую систему управления: постоянным, доверенным участникам может быть предоставлен доступ на запись, в то время как случайные участники могут делать pull requests (запрос на внесение изменений) без необходимости запрашивать разрешение
* Git решает проблемы резервного копирования: каждый, кто клонирует репозиторий, имеет полную копию, так что код дублируется во многих местах
* Поскольку все это основано на файлах, их очень легко перемещать и реорганизовывать
* Автоматическая синхронизация с [ gitbook ](https://legacy.gitbook.com/book/yorikvanhavre/freecad-documentation), поэтому вся документация автоматически всегда доступна в форматах pdf, epub и mobi. Все, что требуется, это обновление файла <SUMMARY.md>. Другие системы, такие как [Readthedocs](https://readthedocs.org/projects/freecad-documentation/) или [Mkdocs](http://www.mkdocs.org/) так же легко настраивать.

Вот как это выглядит на GitBook, его можно прочитать онлайн или скачать как электронную книгу:

![](images/gitbook.png)

* Автоматическая синхронизация с [crowdin](https://crowdin.com/project/freecad-documentation). Любое изменение, сделанное на github, автоматически отражается на crowdin (ручная синхронизация не требуется). Crowdin, в свою очередь, помещает все свои изменения в отдельную ветку в этом репозитории, которую можно объединить в любое время, когда мы сочтем нужным, одним нажатием кнопки. 
* Каждый перевод представляет собой полную копию структуры английского источника, находящуюся в каталоге "переводы". Каждый перевод может быть построен и просмотрен точно так же, как и английский, и они не загромождают дерево английского исходника
* Интерфейс Crowdin для редактирования файлов разметки немного отличается от того, который мы используем для перевода FreeCAD, и очень похож на плагин перевода wiki

Как-то так выглядит интерфейс crowdin при работе с файлами md:

![](images/crowdin.png)

* Crowdin создает полную копию документации для каждого языка. Это значительно упрощает создание полных переведенных версий
* С Git мы можем работать с каталогами, подкаталогами и т. д., что облегчает организацию файлов, по сравнению с "плоской" структурой mediawiki
* С помощью тегов git мы, например, можем отметить определенную версию документации при выпуске. Мы также можем создавать ветки для еще не выпущенных страниц

## Недостатки

* Нужно переместить всю вики, страницу за страницей. Некоторые из них могут быть обработаны автоматически, но в любом случае большую часть ссылок необходимо будет проверить/изменить, поэтому в любом случае потребуется вручную просмотреть каждую страницу
* Переводы нельзя экспортировать автоматически. Это будет длинная работа по копированию и вставке.
* Интерфейс Crowdin, хотя и элегантен для работы с файлами разметки wik, имеет неприятную вещь со ссылками (они отображаются как элементы <a> html). Однако нам, возможно, удастся поговорить об этом с людьми и что-то сделать...</li> </ul> 
  
  <h2>
    Оффлайн документация FreeCAD
  </h2>
  
  <ul>
    <li>
      На первом этапе адаптация генерации оффлайн документации проста, потому что она в любом случае генерируется из html-страниц, и у нас будут те же страницы на github.
    </li>
    <li>
      На втором этапе мы можем изучить что-то более удобное, чем текущая документация на основе qt assistant, может быть, что-то, что отображает html-страницы напрямую, в автономном режиме...
    </li>
  </ul>
  
  <h2>
    Конвертация Mediawiki в Markdown
  </h2>
  
  <p>
    Использовать автоматическую конвертацию wiki <-> md просто, доступно множество скриптов (<a href="http://pandoc.org/"> pandoc </a> или другие <a href="https://github.com/Gozala/markdown-wiki"> скрипты </a>). Переводы-штука сложная. Есть вопрос об изображениях. Также имеются полные <a href="https://github.com/philipashlock/mediawiki-to-markdown"> средства миграции </a>, которые необходимо протестировать
  </p>
  
  <p>
    <strong>Быстрый способ конвертировать:</strong>
  </p>
  
  <p>
    1) Перейти на сайт FreeCad http://www.freecadweb.org/wiki/Special:Export/Arch_Wall 2) Сохраненить Xml-файл на компьютере 2)Сохраните все изображения из wiki и загрузите их на github (в подпапку изображений) 3) <code>pandoc --from mediawiki --to markdown Arch_Wall.xml</code> опционально добавьте <code>--wrap=none</code> 4) Создайте новый файл, вставьте, исправьте ссылки
  </p>
  
  <h2>
    Предложение по структуре
  </h2>
  
  <p>
    Каждая из перечисленных ниже категорий является папкой. Каждая из них содержит вложенную папку "images", куда складываются все изображения страниц, которые находятся внутри этой категории.
  </p>
  
  <ul>
    <li>
      Introduction <ul>
        <li>
          Welcome & about
        </li>
        <li>
          General stuff from user hub, mouse model, etc..
        </li>
        <li>
          Getting started
        </li>
        <li>
          Tutorials
        </li>
      </ul>
    </li>
    <li>
      Workbenches <ul>
        <li>
          Each workbench page
        </li>
        <li>
          Maybe links to external workbenches too?
        </li>
      </ul>
    </li>
    <li>
      Python scripting <ul>
        <li>
          All the poweruser hub pages
        </li>
      </ul>
    </li>
    <li>
      Development and deployment (python scripting is also development, so... should be some other name) <ul>
        <li>
          All the pages from developers hub
        </li>
      </ul>
    </li>
    <li>
      Command reference <ul>
        <li>
          All the individual command pages classified by prefix (Std, Draft, FEM, etc...)
        </li>
      </ul>
    </li>
    <li>
      Translations <ul>
        <li>
          Copies of the whole doc tree in every language
        </li>
      </ul>
    </li>
  </ul>